# DigestPost - Project TODO

## Phase 1: プロジェクトのセットアップとデータベース設計
- [x] プロジェクト初期化（Next.js + Express + PostgreSQL）
- [x] データベーススキーマ設計（user_configs, posted_tweets テーブル）
- [x] ER図の作成
- [x] 必要なライブラリのインストール（playwright, node-cron, twitter-api-v2）

## Phase 2: バックエンドAPIの実装
- [x] ユーザー設定のCRUD APIエンドポイント実装
- [x] 自動投稿のON/OFF切り替えAPIエンドポイント実装
- [x] tRPCプロシージャの定義

## Phase 3: 自動投稿エンジンの実装
- [x] ニュース記事スクレイピングモジュール（playwright使用）
- [x] AIによるコンテンツ生成モジュール（Manus LLM API使用）
  - [x] ツイート用の要約文生成（140文字制限、絵文字・改行対応）
  - [x] 画像生成用の英語プロンプト生成
- [x] AIによる画像生成モジュール（Manus画像生成機能使用）
- [x] X (Twitter) への投稿モジュール（twitter-api-v2使用）
- [x] スケジューラーの実装（node-cron、5時間ごと）
- [x] posted_tweets テーブルへのログ記録

## Phase 4: フロントエンド（設定画面とコントロールパネル）の実装
- [x] 設定フォームの作成（X APIキー入力）
- [x] 設定情報の表示・変更・削除機能
- [x] 自動投稿のON/OFFトグルスイッチ
- [x] 投稿履歴の一覧表示（ツイート内容、画像、元ニュースへのリンク）
- [x] ホームページの作成
- [x] ナビゲーション構造の実装

## Phase 5: デプロイと最終確認
- [x] 環境変数の安全な管理設定
- [x] スケジューラーのサーバー統合
- [ ] 機能の統合テスト
- [ ] チェックポイント保存
- [ ] 手動実行ボタンの実装

## Phase 6: ユーザーへの成果物の提供
- [x] userGuide.md の作成
- [ ] 最終チェックポイント保存
- [ ] デプロイ完了

## 追加実装項目
- [ ] X APIキーの暗号化保存
- [ ] エラーハンドリングの強化
- [ ] ログシステムの実装

## 追加機能要望
- [x] ホーム画面に手動実行ボタンを実装

## バグ修正
- [x] スクレイパーが記事を取得できないエラーを修正

## スクレイパーのデバッグ
- [x] サーバーログを確認してスクレイパーのエラーを特定
- [x] ダミーデータを使用したフォールバック機能を実装

## URL修正
- [x] ダミー記事のURLを実際の有効なURLに修正

## 実ニュース取得の改善
- [x] スクレイパーのロジックを見直して実際のニュースを取得
- [x] CNN、BBC、Bloomberg、Fox Newsから本物のニュースを取得
